image: node:20-alpine

.build-sdk:
  # Required environment variables:
  # - STAINLESS_API_KEY: Stainless API key (required for GitLab CI)
  # - PROJECT: Stainless project name
  # - OAS_PATH: Path to your OpenAPI spec
  #
  # Optional environment variables:
  # - CONFIG_PATH: Path to your Stainless config
  # - BRANCH: Stainless branch name (defaults to "main")
  # - COMMIT_MESSAGE: Commit message for the SDK build
  script:
    - apk add --no-cache git
    - wget https://raw.githubusercontent.com/stainless-api/upload-openapi-spec-action/v1/dist/build.js
    - node build.js
  variables:
    DEFAULT_BRANCH: $CI_DEFAULT_BRANCH
